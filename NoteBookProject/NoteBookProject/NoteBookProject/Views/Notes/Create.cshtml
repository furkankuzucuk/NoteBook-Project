@model NoteBookProject.Models.Note

<h2>Creating a new Note</h2>

<form asp-action="Create" method="post" id="create-note-form">
    <div class="form-group">
        <label for="Title">Title</label>
        <input type="text" class="form-control" id="Title" name="Title" required />
    </div>
    <div class="form-group">
        <label for="Content">Contents</label>
        <div id="editorjs"></div>
        <input type="hidden" id="Content" name="Content" />
    </div>
    <button type="submit" class="btn btn-primary mt-3">Save Note</button>
</form>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/@@editorjs/editorjs@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@@editorjs/header@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@@editorjs/paragraph@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@@editorjs/list@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@@editorjs/inline-code@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@@editorjs/image@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@@editorjs/quote@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@@editorjs/marker@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@@editorjs/link@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@@editorjs/delimiter@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@@editorjs/table@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@@editorjs/raw@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@@editorjs/warning@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@@editorjs/checklist@latest"></script>

    <script>
        const editor = new EditorJS({
            holder: 'editorjs',
            tools: {
                header: {
                    class: Header,
                    inlineToolbar: ['bold', 'italic', 'link']
                },
                paragraph: {
                    class: Paragraph,
                    inlineToolbar: ['bold', 'italic', 'underline', 'inlineCode', 'link', 'marker']
                },
                list: {
                    class: List,
                    inlineToolbar: ['bold', 'italic', 'link']
                },
                inlineCode: {
                    class: InlineCode,
                },
                image: {
                    class: ImageTool,
                    config: {
                        endpoints: {
                            byFile: 'http://localhost:8008/uploadFile',
                            byUrl: 'http://localhost:8008/fetchUrl',
                        }
                    }
                },
                quote: {
                    class: Quote,
                    inlineToolbar: ['bold', 'italic', 'link']
                },
                marker: {
                    class: Marker,
                    shortcut: 'CMD+SHIFT+M'
                },
                linkTool: {
                    class: LinkTool,
                    config: {
                        endpoint: 'http://localhost:8008/fetchUrl',
                    }
                },
                delimiter: {
                    class: Delimiter
                },
                table: {
                    class: Table,
                },
                raw: {
                    class: RawTool,
                },
                warning: {
                    class: Warning,
                    config: {
                        titlePlaceholder: 'Title',
                        messagePlaceholder: 'Message',
                    }
                },
                checklist: {
                    class: Checklist,
                    inlineToolbar: true,
                }
            },
            inlineToolbar: true,
        });

        document.getElementById('create-note-form').addEventListener('submit', async function (e) {
            e.preventDefault();

            try {
                const outputData = await editor.save();
                document.getElementById('Content').value = JSON.stringify(outputData);
                this.submit();
            } catch (error) {
                console.error('Saving failed:', error);
            }
        });
    </script>
}
